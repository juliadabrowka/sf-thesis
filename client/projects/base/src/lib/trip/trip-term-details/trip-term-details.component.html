<nz-table
  #tripTermTable
  [nzData]="sfTripTerms()">
  <thead>
  <tr>
    @for (column of __columns; track column) {
      <th class="th">{{ column }}</th>
    }
  </tr>
  </thead>
  <tbody>
  <td>
    <input
      nz-input
      [formControl]="__controls.name"
    />
  </td>
  <td>
    <nz-date-picker
      [formControl]="__controls.dateFrom"
    ></nz-date-picker>
    <nz-date-picker
      [formControl]="__controls.dateTo"
    ></nz-date-picker>
  </td>
  <td>
    <nz-input-number
      [formControl]="__controls.price"
    ></nz-input-number>
  </td>
  <td>
    <nz-input-number
      [formControl]="__controls.participantsCurrent"
    ></nz-input-number>
  </td>
  <td>
    <sf-button
      [sfFontSize]="'12px'"
      [sfButtonText]="'Dodaj'"
      (sfOnButtonClicked)="__addTripTerm()"
    ></sf-button>
  </td>
    @for (tripTerm of tripTermTable.data; track tripTerm.Id) {
      <tr class="editable-row">
        <td>
          <div
            class="editable-cell"
            [hidden]="__editId === tripTerm.Id"
            (click)="startEdit(tripTerm)"
          >
            {{ tripTerm.Name }}
          </div>
          <input
            nz-input
            [(ngModel)]="tripTerm.Name"
            [hidden]="__editId !== tripTerm.Id"
            (blur)="stopEdit()"
          />
        </td>

        <td>
          <div
            class="editable-cell"
            [hidden]="__editId === tripTerm.Id"
            (click)="startEdit(tripTerm)"
          >
            {{ tripTerm.DateFrom | date: 'dd/MM/yyyy' }}
          </div>
          <nz-date-picker
            [(ngModel)]="tripTerm.DateFrom"
            [hidden]="__editId !== tripTerm.Id"
            (blur)="stopEdit()"
        ></nz-date-picker>
        </td>

        <td>
          <nz-date-picker
            class="editable-cell"
            [hidden]="__editId === tripTerm.Id"
          >
            {{ tripTerm.DateTo | date: 'dd/MM/yyyy' }}
          </nz-date-picker>
          <nz-date-picker
            [(ngModel)]="tripTerm.DateTo"
            [hidden]="__editId !== tripTerm.Id"
            (blur)="stopEdit()"
        ></nz-date-picker>
        </td>

        <td>
          <div
            class="editable-cell"
            [hidden]="__editId === tripTerm.Id"
            (click)="startEdit(tripTerm)"
          >
            {{ tripTerm.Price }}

          </div>
          <nz-input-number
            [(ngModel)]="tripTerm.Price"
            [hidden]="__editId !== tripTerm.Id"
            (blur)="stopEdit()"
        ></nz-input-number>
        </td>

        <td>
          <div
            class="editable-cell"
            [hidden]="__editId === tripTerm.Id"
            (click)="startEdit(tripTerm)"
          >
            {{ tripTerm.ParticipantsTotal }}
            <nz-input-number
              [(ngModel)]="tripTerm.ParticipantsTotal"
              [hidden]="__editId !== tripTerm.Id"
              (blur)="stopEdit()"
            ></nz-input-number>
          </div>
        </td>

        <td>
          <sf-button
            [sfButtonText]="'Zapisz'"
            [sfFontSize]="'12px'"
            (sfOnButtonClicked)="__saveTripTerms(tripTerm.Id)"
          ></sf-button>
        </td>
      </tr>

    }
  </tbody>
</nz-table>
